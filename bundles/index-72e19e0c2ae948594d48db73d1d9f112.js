__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(r);if(n&&n.has(e))return n.get(e);var t={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,n&&n.set(e,t),t})(_r(d[1])),n=_r(d[2]),t=e(_r(d[3])),o=_r(d[4]),s=_r(d[5]),a=_r(d[6]),c=_r(d[7]),u=e(_r(d[8])),i=_r(d[9]),l=_r(d[10]),p=_r(d[11]);function f(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:r})(e)}const j=(0,n.createStackNavigator)(),O=()=>(0,p.jsx)(s.ErrorBoundary,{children:(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(u.default,{})})}),x=({route:e,navigation:n})=>{const u=(0,t.default)(e,['params','orderID']),{collection:l}=(0,i.useCollection)('orders'),f=l.findOneFix(u),j=r.useMemo((()=>new o.ObservableResource(f.$)),[f]);return(0,p.jsx)(s.ErrorBoundary,{children:(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(c.EditOrder,{resource:j})})})},v=({route:e})=>{const n=(0,t.default)(e,['params','orderID']),{collection:c}=(0,i.useCollection)('orders'),u=c.findOneFix(n),f=r.useMemo((()=>new o.ObservableResource(u.$)),[u]);return(0,p.jsx)(s.ErrorBoundary,{children:(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(l.ReceiptModal,{resource:f})})})};_e.default=()=>(0,p.jsxs)(j.Navigator,{screenOptions:{headerShown:!1},children:[(0,p.jsx)(j.Screen,{name:"Orders",component:O}),(0,p.jsxs)(j.Group,{screenOptions:{presentation:'transparentModal'},children:[(0,p.jsx)(j.Screen,{name:"EditOrder",component:x}),(0,p.jsx)(j.Screen,{name:"Receipt",component:v})]})]})}),3911,[1,17,2097,899,1170,888,2155,3933,3936,3389,3450,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditOrder=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=l?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),l=_r(d[4]),s=_r(d[5]),o=_r(d[6]),a=_r(d[7]),i=_r(d[8]),c=_r(d[9]),u=e(_r(d[10])),f=_r(d[11]);function j(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(j=function(e){return e?t:r})(e)}_e.EditOrder=({resource:e})=>{const j=(0,t.useObservableSuspense)(e),x=(0,c.useT)(),[h,b]=r.useState('form');return(0,u.default)(),(0,n.isRxDocument)(j)?(0,f.jsx)(l.Modal,{children:(0,f.jsxs)(l.ModalContent,{size:"lg",children:[(0,f.jsx)(l.ModalHeader,{children:(0,f.jsx)(l.ModalTitle,{children:(0,f.jsx)(o.Text,{children:j.id?x('Edit Order #{number}',{number:j.id,_tags:'core'}):x('Edit Order',{_tags:'core'})})})}),(0,f.jsx)(l.ModalBody,{children:(0,f.jsxs)(s.Tabs,{value:h,onValueChange:b,children:[(0,f.jsxs)(s.TabsList,{className:"flex-row w-full",children:[(0,f.jsx)(s.TabsTrigger,{value:"form",className:"flex-1",children:(0,f.jsx)(o.Text,{children:x('Form',{_tags:'core'})})}),(0,f.jsx)(s.TabsTrigger,{value:"json",className:"flex-1",children:(0,f.jsx)(o.Text,{children:x('JSON',{_tags:'core'})})})]}),(0,f.jsx)(s.TabsContent,{value:"form",children:(0,f.jsx)(i.EditOrderForm,{order:j})}),(0,f.jsx)(s.TabsContent,{value:"json",children:(0,f.jsx)(a.Tree,{value:j.toJSON()})})]})})]})}):(0,f.jsx)(l.Modal,{children:(0,f.jsx)(l.ModalContent,{size:"lg",children:(0,f.jsx)(l.ModalHeader,{children:(0,f.jsx)(l.ModalTitle,{children:(0,f.jsx)(o.Text,{children:x('No order found',{_tags:'core'})})})})})})}}),3933,[1,17,1170,1398,2388,3402,1100,2390,3934,2083,3394,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditOrderForm=void 0;var t=k(_r(d[1])),r=e(_r(d[2])),s=_r(d[3]),n=_r(d[4]),a=_r(d[5]),o=_r(d[6]),l=k(_r(d[7])),i=_r(d[8]),c=_r(d[9]),u=_r(d[10]),_=_r(d[11]),p=_r(d[12]),h=_r(d[13]),b=e(_r(d[14])),j=_r(d[15]),f=_r(d[16]),x=_r(d[17]),y=_r(d[18]),F=_r(d[19]),O=_r(d[20]),C=_r(d[21]),w=_r(d[22]),v=e(_r(d[23])),S=_r(d[24]),M=_r(d[25]),P=e(_r(d[26])),T=_r(d[27]),E=_r(d[28]);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s}const A=l.object(Object.assign({status:l.string(),parent_id:l.number().optional(),customer_id:l.number().default(0),customer_note:l.string().optional()},f.billingAddressSchema.shape,w.shippingAddressSchema.shape,{payment_method:l.string().optional(),payment_method_title:l.string().optional(),currency:l.string().optional(),transaction_id:l.string().optional(),meta_data:O.metaDataSchema}));_e.EditOrderForm=({order:e})=>{const l=(0,v.default)(),{localPatch:D}=(0,S.useLocalMutation)(),k=(0,j.useT)(),[I,N]=t.useState(!1),{format:V}=(0,P.default)(),L=t.useRef(e?.getLatest().customer_id),{collection:R}=(0,M.useCollection)('customers'),W=(0,T.useGuestCustomer)();if(!e)throw new Error(k('Order not found',{_tags:'core'}));const B=(0,n.useObservablePickState)(e.$,(()=>{const t=e.getLatest();return{status:t.status,parent_id:t.parent_id,currency:t.currency,customer_id:t.customer_id,customer_note:t.customer_note,billing:t.billing,shipping:t.shipping,payment_method:t.payment_method,payment_method_title:t.payment_method_title,transaction_id:t.transaction_id,meta_data:t.meta_data}}),'status','parent_id','currency','customer_id','customer_note','billing','shipping','payment_method','payment_method_title','transaction_id','meta_data'),G=t.useCallback((async t=>{N(!0);try{await D({document:e,data:t}),await l(e).then((e=>{(0,o.isRxDocument)(e)&&p.Toast.show({type:'success',text1:k('Order #{number} saved',{_tags:'core',number:e.number})})}))}catch(e){p.Toast.show({type:'error',text1:k('{message}',{_tags:'core',message:e.message||'Error'})})}finally{N(!1)}}),[D,e,l,k]),z=(0,a.useForm)({resolver:(0,s.zodResolver)(A),defaultValues:Object.assign({},B)});t.useEffect((()=>{z.reset(Object.assign({},B))}),[B,z]);const $=t.useCallback((async e=>{if(null!=e)try{let t;if(t=0===e?W:await R.findOne({selector:{id:e}}).exec(),!t)throw new Error(k('Customer not found',{_tags:'core'}));const r=Object.assign({},t.billing,{first_name:t.billing.first_name||t.first_name,last_name:t.billing.last_name||t.last_name,email:t.billing.email||t.email});z.setValue('billing',r,{shouldValidate:!0}),z.setValue('shipping',t.shipping,{shouldValidate:!0}),z.setValue('customer_id',e)}catch(e){b.default.error('Error fetching customer:',e)}}),[z,R,W,k]);t.useEffect((()=>{const e=z.watch((e=>{void 0!==e.customer_id&&null!==e.customer_id&&L.current!==e.customer_id&&(L.current=e.customer_id,$(e.customer_id))}));return()=>e.unsubscribe()}),[z,$]);const q=z.watch('customer_id'),H=z.watch('billing'),J=z.watch('shipping'),K=t.useMemo((()=>V({id:q,billing:H,shipping:J})),[q,H,J,V]);return(0,E.jsx)(c.Form,Object.assign({},z,{children:(0,E.jsxs)(h.VStack,{className:"gap-4",children:[(0,E.jsx)(F.FormErrors,{}),(0,E.jsxs)(r.default,{className:"grid grid-cols-2 gap-4",children:[(0,E.jsx)(c.FormField,{control:z.control,name:"status",render:({field:e})=>(0,E.jsx)(c.FormSelect,Object.assign({label:k('Status',{_tags:'core'}),customComponent:C.OrderStatusSelect},e))}),(0,E.jsx)(c.FormField,{control:z.control,name:"parent_id",render:({field:e})=>(0,E.jsx)(c.FormInput,Object.assign({label:k('Parent ID',{_tags:'core'})},e))}),(0,E.jsx)(c.FormField,{control:z.control,name:"customer_id",render:({field:e})=>(0,E.jsx)(c.FormCombobox,Object.assign({customComponent:y.CustomerSelect,label:k('Customer',{_tags:'core'}),withGuest:!0},e,{value:{value:e.value,label:K}}))}),(0,E.jsx)(c.FormField,{control:z.control,name:"customer_note",render:({field:e})=>(0,E.jsx)(c.FormTextarea,Object.assign({label:k('Customer Note',{_tags:'core'})},e))}),(0,E.jsx)(r.default,{className:"col-span-2",children:(0,E.jsxs)(i.Collapsible,{children:[(0,E.jsx)(i.CollapsibleTrigger,{children:(0,E.jsx)(_.Text,{children:k('Billing Address',{_tags:'core'})})}),(0,E.jsx)(i.CollapsibleContent,{children:(0,E.jsx)(f.BillingAddressForm,{})})]})}),(0,E.jsx)(r.default,{className:"col-span-2",children:(0,E.jsxs)(i.Collapsible,{children:[(0,E.jsx)(i.CollapsibleTrigger,{children:(0,E.jsx)(_.Text,{children:k('Shipping Address',{_tags:'core'})})}),(0,E.jsx)(i.CollapsibleContent,{children:(0,E.jsx)(w.ShippingAddressForm,{})})]})}),(0,E.jsx)(c.FormField,{control:z.control,name:"payment_method",render:({field:e})=>(0,E.jsx)(c.FormInput,Object.assign({label:k('Payment Method ID',{_tags:'core'})},e))}),(0,E.jsx)(c.FormField,{control:z.control,name:"payment_method_title",render:({field:e})=>(0,E.jsx)(c.FormInput,Object.assign({label:k('Payment Method Title',{_tags:'core'})},e))}),(0,E.jsx)(c.FormField,{control:z.control,name:"currency",render:({field:e})=>(0,E.jsx)(c.FormSelect,Object.assign({customComponent:x.CurrencySelect,label:k('Currency',{_tags:'core'})},e))}),(0,E.jsx)(c.FormField,{control:z.control,name:"transaction_id",render:({field:e})=>(0,E.jsx)(c.FormInput,Object.assign({label:k('Transaction ID',{_tags:'core'})},e))}),(0,E.jsx)(r.default,{className:"col-span-2",children:(0,E.jsx)(O.MetaDataForm,{name:"meta_data"})})]}),(0,E.jsxs)(u.ModalFooter,{className:"px-0",children:[(0,E.jsx)(u.ModalClose,{children:k('Cancel',{_tags:'core'})}),(0,E.jsx)(u.ModalAction,{loading:I,onPress:z.handleSubmit(G),children:k('Save',{_tags:'core'})})]})]})}))}}),3934,[1,17,320,3271,1170,3273,1398,3274,3324,3275,2388,1100,1139,1130,1767,2083,3411,3441,3445,3400,3407,3935,3422,3408,3401,3389,3424,3439,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.OrderStatusSelect=void 0;var t=e(_r(d[1])),r=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var l={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var u=a?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(l,n,u):l[n]=e[n]}return l.default=e,r&&r.set(e,l),l})(_r(d[2])),l=_r(d[3]),a=_r(d[4]),n=_r(d[5]),u=_r(d[6]);const c=["value"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}(_e.OrderStatusSelect=r.forwardRef(((e,r)=>{let{value:s}=e,o=(0,t.default)(e,c);const i=(0,a.useT)(),{items:f}=(0,n.useOrderStatusLabel)(),p=f.find((e=>e.value===s?.value))?.label;return(0,u.jsxs)(l.Select,Object.assign({ref:r,value:Object.assign({},s,{label:p})},o,{children:[(0,u.jsx)(l.SelectTrigger,{children:(0,u.jsx)(l.SelectValue,{className:"text-foreground text-sm native:text-lg",placeholder:i('Select Status',{_tags:'core'})})}),(0,u.jsx)(l.SelectContent,{children:f.map((e=>(0,u.jsx)(l.SelectItem,{label:e.label,value:e.value},e.label)))})]}))}))).displayName='OrderStatusSelect'}),3935,[1,31,17,3300,2083,3588,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=q(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}a.default=e,r&&r.set(e,a)})(_r(d[1]));var t=e(_r(d[2])),r=_r(d[3]),a=_r(d[4]),s=_r(d[5]),n=_r(d[6]),o=_r(d[7]),i=_r(d[8]),l=_r(d[9]),c=_r(d[10]),u=_r(d[11]),p=_r(d[12]),f=_r(d[13]),_=e(_r(d[14])),h=_r(d[15]),y=_r(d[16]),j=_r(d[17]),x=_r(d[18]),S=_r(d[19]),v=_r(d[20]),b=_r(d[21]),O=_r(d[22]),D=_r(d[23]),C=_r(d[24]),M=_r(d[25]),N=_r(d[26]),P=_r(d[27]),k=_r(d[28]),w=_r(d[29]),I=_r(d[30]);function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(q=function(e){return e?r:t})(e)}const A={actions:c.Actions,billing:u.Address,shipping:u.Address,customer_id:O.Customer,customer_note:p.Note,status:M.Status,total:N.Total,date_created_gmt:S.Date,date_modified_gmt:S.Date,date_completed_gmt:S.Date,date_paid_gmt:S.Date,payment_method:C.PaymentMethod,created_via:b.CreatedVia,cashier:v.Cashier,receipt:f.Receipt,number:D.OrderNumber},B=e=>(0,t.default)(A,e.column.id);_e.default=()=>{const{uiSettings:e}=(0,w.useUISettings)('orders'),t=(0,j.useT)(),{wpCredentials:c,store:u}=(0,y.useAppState)(),p={$and:[{meta_data:{$elemMatch:{key:'_pos_user',value:String(c?.id)}}}]};u?.id?p.$and.push({meta_data:{$elemMatch:{key:'_pos_store',value:String(u?.id)}}}):p.created_via='woocommerce-pos';const f=(0,l.useQuery)({queryKeys:['orders'],collectionName:'orders',initialParams:{sort:[{[e.sortBy]:e.sortDirection}],selector:p},infiniteScroll:!0});return(0,I.jsx)(r.Box,{className:"p-2 h-full",children:(0,I.jsxs)(a.Card,{className:"flex-1",children:[(0,I.jsx)(a.CardHeader,{className:"p-2 bg-input",children:(0,I.jsxs)(i.VStack,{children:[(0,I.jsxs)(n.HStack,{children:[(0,I.jsx)(P.QuerySearchInput,{query:f,placeholder:t('Search Orders',{_tags:'core'}),className:"flex-1"}),(0,I.jsx)(k.UISettingsDialog,{title:t('Order Settings',{_tags:'core'}),children:(0,I.jsx)(h.UISettingsForm,{})})]}),(0,I.jsx)(s.ErrorBoundary,{children:(0,I.jsx)(_.default,{query:f})})]})}),(0,I.jsx)(a.CardContent,{className:"flex-1 p-0",children:(0,I.jsx)(s.ErrorBoundary,{children:(0,I.jsx)(o.Suspense,{children:(0,I.jsx)(x.DataTable,{id:"orders",query:f,renderCell:B,noDataMessage:t('No orders found',{_tags:'core'}),estimatedItemSize:100})})})})]})})}}),3936,[1,17,899,2220,2389,888,891,2155,1130,2168,3937,3938,3939,3940,3941,3942,1168,2083,3366,3587,3703,3704,3705,3706,3707,3708,3709,3428,3322,2382,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.Actions=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n})(_r(d[1])),r=_r(d[2]),n=_r(d[3]),o=_r(d[4]),s=_r(d[5]),a=_r(d[6]),i=_r(d[7]),l=_r(d[8]),c=_r(d[9]),u=_r(d[10]),p=e(_r(d[11])),h=e(_r(d[12])),j=_r(d[13]),x=_r(d[14]);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}const D=(e,t,r)=>{const n=e.findIndex((e=>e.key===t));-1!==n?e[n].value=r:e.push({key:t,value:r})};_e.Actions=({row:e})=>{const f=e.original.document,v=(0,r.useNavigation)(),w=(0,h.default)(),{localPatch:_}=(0,j.useLocalMutation)(),[y,M]=t.useState(!1),b=(0,u.useT)(),{store:I,wpCredentials:P}=(0,c.useAppState)(),A=(0,n.useObservableEagerState)(f.id$),O=(0,p.default)(),S=t.useCallback((async()=>{const e=f.getLatest().toMutableJSON()?.meta_data||[];D(e,'_pos_user',String(P.id)),0!==I.id&&D(e,'_pos_store',String(I.id)),await _({document:f,data:{status:'pos-open',meta_data:e}}),v.navigate('POSStack',{screen:'POS',params:{orderID:f.uuid}})}),[_,v,f,I.id,P.id]),T=t.useCallback((async()=>{try{const e=f.getLatest();e.id&&await O(e.id,e.collection),await e.remove()}finally{}}),[O,f]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(s.DropdownMenu,{children:[(0,x.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,x.jsx)(i.IconButton,{name:"ellipsisVertical"})}),(0,x.jsxs)(s.DropdownMenuContent,{align:"end",children:[(0,x.jsxs)(s.DropdownMenuItem,{onPress:()=>v.navigate('EditOrder',{orderID:f.uuid}),children:[(0,x.jsx)(a.Icon,{name:"penToSquare"}),(0,x.jsx)(l.Text,{children:b('Edit',{_tags:'core'})})]}),(0,x.jsxs)(s.DropdownMenuItem,{onPress:S,children:[(0,x.jsx)(a.Icon,{name:"cartShopping"}),(0,x.jsx)(l.Text,{children:b('Re-open',{_tags:'core'})})]}),A&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(s.DropdownMenuItem,{onPress:()=>v.navigate('Receipt',{orderID:f.uuid}),children:[(0,x.jsx)(a.Icon,{name:"receipt"}),(0,x.jsx)(l.Text,{children:b('Receipt',{_tags:'core'})})]}),(0,x.jsxs)(s.DropdownMenuItem,{onPress:()=>w(f.id,f.collection),children:[(0,x.jsx)(a.Icon,{name:"arrowRotateRight"}),(0,x.jsx)(l.Text,{children:b('Sync',{_tags:'core'})})]})]}),(0,x.jsx)(s.DropdownMenuSeparator,{}),(0,x.jsxs)(s.DropdownMenuItem,{variant:"destructive",onPress:()=>M(!0),children:[(0,x.jsx)(a.Icon,{name:"trash",className:"fill-destructive web:group-focus:fill-accent-foreground"}),(0,x.jsx)(l.Text,{children:b('Delete',{_tags:'core'})})]})]})]}),(0,x.jsx)(o.AlertDialog,{open:y,onOpenChange:M,children:(0,x.jsxs)(o.AlertDialogContent,{children:[(0,x.jsxs)(o.AlertDialogHeader,{children:[(0,x.jsx)(o.AlertDialogTitle,{children:f.id?b('Delete order {id}',{_tags:'core',id:f.id}):b('Delete order')}),(0,x.jsx)(o.AlertDialogDescription,{children:f.id?b('Are you sure you want to delete this order? Deleted orders will be placed in the Trash on the server.'):b('Are you sure you want to delete this order? This order has not been saved to the server, it will be deleted permanently.',{_tags:'core'})})]}),(0,x.jsxs)(o.AlertDialogFooter,{children:[(0,x.jsx)(o.AlertDialogCancel,{children:b('Cancel',{_tags:'core'})}),(0,x.jsx)(o.AlertDialogAction,{variant:"destructive",onPress:T,children:b('Delete',{_tags:'core'})})]})]})})]})}}),3937,[1,17,487,1170,3576,2249,898,1102,1100,1168,2083,3409,3427,3401,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Address=void 0;!(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var f=u?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=e[a]}o.default=e,t&&t.set(e,o)})(_r(d[0]));var e=_r(d[1]),r=_r(d[2]),t=_r(d[3]);function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}_e.Address=({row:n,column:o})=>{const u=n.original.document,a=(0,e.useObservableEagerState)(u[`${o.id}$`]);return a?(0,t.jsx)(r.FormatAddress,{address:a,showName:!1}):null}}),3938,[17,1170,3580,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Note=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(n,l,u):n[l]=e[l]}n.default=e,r&&r.set(e,n)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]),n=_r(d[4]),o=_r(d[5]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}_e.Note=({row:i})=>{const l=i.original.document,u=(0,e.useObservableEagerState)(l.customer_note$);return u?(0,o.jsxs)(n.Tooltip,{delayDuration:150,children:[(0,o.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,o.jsx)(t.IconButton,{name:"messageLines"})}),(0,o.jsx)(n.TooltipContent,{children:(0,o.jsx)(r.Text,{children:u})})]}):null}}),3939,[17,1170,1102,1100,1103,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Receipt=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,r&&r.set(e,n)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]),n=_r(d[4]),o=_r(d[5]),i=_r(d[6]),a=_r(d[7]);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}_e.Receipt=({row:u})=>{const l=u.original.document,c=!!(0,t.useObservableEagerState)(l.id$),p=(0,i.useT)(),s=(0,e.useNavigation)();return c?(0,a.jsxs)(o.Tooltip,{delayDuration:150,children:[(0,a.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(r.IconButton,{name:"receipt",onPress:()=>s.navigate('Receipt',{orderID:l.uuid})})}),(0,a.jsx)(o.TooltipContent,{children:(0,a.jsx)(n.Text,{children:p('Receipt',{_tags:'core'})})})]}):null}}),3940,[17,487,1170,1102,1100,1103,2083,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w(r);if(t&&t.has(e))return t.get(e);var u={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=s?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(u,a,l):u[a]=e[a]}return u.default=e,t&&t.set(e,u),u})(_r(d[1])),t=e(_r(d[2])),u=_r(d[3]),s=_r(d[4]),a=_r(d[5]),l=_r(d[6]),o=_r(d[7]),n=_r(d[8]),c=_r(d[9]),i=_r(d[10]),p=e(_r(d[11])),f=_r(d[12]),y=_r(d[13]),b=_r(d[14]),v=_r(d[15]),h=_r(d[16]);function w(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(w=function(e){return e?t:r})(e)}_e.default=({query:e})=>{const w=(0,v.useGuestCustomer)(),O=(0,u.useObservableEagerState)(e.rxQuery$.pipe((0,a.map)((()=>e.getSelector('customer_id'))))),j=(0,u.useObservableEagerState)(e.rxQuery$.pipe((0,a.map)((()=>e.getMetaDataElemMatchValue('_pos_user'))))),{wpCredentials:x}=(0,c.useAppState)(),_=(0,n.useQuery)({queryKeys:['customers','customer-filter'],collectionName:'customers'});r.useEffect((()=>{null===O&&void 0===O||_.where('id').equals(O).exec()}),[O,_]);const M=(0,n.useQuery)({queryKeys:['customers','cashier-filter'],collectionName:'customers'});r.useEffect((()=>{j&&M.where('id').equals((0,t.default)(j)).exec()}),[j,M]);const q=(0,u.useObservable)((e=>e.pipe((0,a.switchMap)((([e])=>0===e?(0,s.of)(w):e?_.result$.pipe((0,a.map)((e=>{if(1===e.count)return e.hits[0].document}))):(0,s.of)(null))))),[O]),P=r.useMemo((()=>new u.ObservableResource(q)),[q]),S=(0,u.useObservable)((e=>e.pipe((0,a.switchMap)((([e])=>e?M.result$.pipe((0,a.map)((e=>{if(1===e.count)return e.hits[0].document}))):(0,s.of)(null))))),[j]),D=r.useMemo((()=>new u.ObservableResource(S)),[S]),E=r.useMemo((()=>new u.ObservableResource(x.populate$('stores'),(e=>!!e))),[x]);return(0,h.jsxs)(l.HStack,{className:"w-full flex-wrap",children:[(0,h.jsx)(y.StatusPill,{query:e}),(0,h.jsx)(o.Suspense,{children:(0,h.jsx)(p.default,{resource:P,query:e,customerID:O})}),(0,h.jsx)(o.Suspense,{children:(0,h.jsx)(i.CashierPill,{resource:D,query:e,cashierID:j})}),(0,h.jsx)(b.StorePill,{resource:E,query:e}),(0,h.jsx)(f.DateRangePill,{query:e})]})}}),3941,[1,17,1781,1170,1171,1395,891,2155,2168,1168,3589,3590,3591,3701,3702,3439,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.schema=_e.UISettingsForm=void 0;var e=f(_r(d[0])),t=_r(d[1]),r=_r(d[2]),n=_r(d[3]),s=f(_r(d[4])),o=_r(d[5]),a=_r(d[6]),u=_r(d[7]),c=_r(d[8]),l=_r(d[9]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}const p=_e.schema=s.object(Object.assign({},u.columnsFormSchema.shape));_e.UISettingsForm=()=>{const{uiSettings:s,getUILabel:i,resetUI:f,patchUI:b}=(0,c.useUISettings)('orders'),j=(0,r.useObservableState)(s.$,s.get()),{buttonPressHandlerRef:O}=(0,u.useDialogContext)();O.current=f;const h=(0,n.useForm)({resolver:(0,t.zodResolver)(p),defaultValues:Object.assign({},j)});return e.useEffect((()=>{h.reset(Object.assign({},j))}),[j,h]),(0,o.useFormChangeHandler)({form:h,onChange:b}),(0,l.jsx)(o.Form,Object.assign({},h,{children:(0,l.jsx)(a.VStack,{children:(0,l.jsx)(u.UISettingsColumnsForm,{columns:j.columns,getUILabel:i})})}))}}),3942,[17,3271,1170,3273,3274,3275,1130,3322,2382,483]);
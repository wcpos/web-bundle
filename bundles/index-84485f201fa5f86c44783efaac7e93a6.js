__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(r);if(n&&n.has(e))return n.get(e);var t={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,n&&n.set(e,t),t})(_r(d[1])),n=_r(d[2]),t=_r(d[3]),o=_r(d[4]),a=_r(d[5]),s=_r(d[6]),i=_r(d[7]),c=_r(d[8]),u=_r(d[9]),l=e(_r(d[10])),p=_r(d[11]),f=_r(d[12]),j=_r(d[13]);function x(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:r})(e)}const v=(0,n.createStackNavigator)(),y=()=>{const e=(0,s.useQuery)({queryKeys:['tax-rates'],collectionName:'taxes'});return(0,j.jsx)(o.ErrorBoundary,{children:(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(p.TaxRatesProvider,{taxQuery:e,children:(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(l.default,{})})})})})},h=({navigation:e})=>(0,j.jsx)(i.AddProduct,{}),O=({route:e,navigation:n})=>{const{productID:s}=e.params,{collection:i}=(0,f.useCollection)('products'),u=i.findOneFix(s),l=r.useMemo((()=>new t.ObservableResource(u.$)),[u]);return(0,j.jsx)(o.ErrorBoundary,{children:(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(c.EditProduct,{resource:l})})})},P=({route:e,navigation:n})=>{const{variationID:s,parentID:i}=e.params,{collection:c}=(0,f.useCollection)('variations'),l=c.findOneFix(s),p=r.useMemo((()=>new t.ObservableResource(l.$)),[l]);return(0,j.jsx)(o.ErrorBoundary,{children:(0,j.jsx)(a.Suspense,{children:(0,j.jsx)(u.EditVariation,{resource:p})})})};_e.default=()=>(0,j.jsxs)(v.Navigator,{screenOptions:{headerShown:!1},children:[(0,j.jsx)(v.Screen,{name:"Products",component:y}),(0,j.jsxs)(v.Group,{screenOptions:{presentation:'transparentModal'},children:[(0,j.jsx)(v.Screen,{name:"AddProduct",component:h}),(0,j.jsx)(v.Screen,{name:"EditProduct",component:O}),(0,j.jsx)(v.Screen,{name:"EditVariation",component:P})]})]})}),3903,[1,17,2099,1172,888,2157,2243,3934,3935,3938,3940,3470,3390,483]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AddProduct=void 0;e.AddProduct=()=>null}),3934,[]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditProduct=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=l?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),l=_r(d[4]),o=_r(d[5]),a=_r(d[6]),s=_r(d[7]),c=_r(d[8]),i=_r(d[9]),u=e(_r(d[10])),f=_r(d[11]);function j(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(j=function(e){return e?t:r})(e)}_e.EditProduct=({resource:e})=>{const j=(0,t.useObservableSuspense)(e),x=(0,i.useT)(),[h,p]=r.useState('form');return(0,u.default)(),(0,n.isRxDocument)(j)?(0,f.jsx)(l.Modal,{children:(0,f.jsxs)(l.ModalContent,{size:"lg",children:[(0,f.jsx)(l.ModalHeader,{children:(0,f.jsx)(l.ModalTitle,{children:x('Edit {name}',{name:j.name,_tags:'core'})})}),(0,f.jsx)(l.ModalBody,{children:(0,f.jsxs)(o.Tabs,{value:h,onValueChange:p,children:[(0,f.jsxs)(o.TabsList,{className:"flex-row w-full",children:[(0,f.jsx)(o.TabsTrigger,{value:"form",className:"flex-1",children:(0,f.jsx)(a.Text,{children:x('Form',{_tags:'core'})})}),(0,f.jsx)(o.TabsTrigger,{value:"json",className:"flex-1",children:(0,f.jsx)(a.Text,{children:x('JSON',{_tags:'core'})})})]}),(0,f.jsx)(o.TabsContent,{value:"form",children:(0,f.jsx)(c.EditProductForm,{product:j})}),(0,f.jsx)(o.TabsContent,{value:"json",children:(0,f.jsx)(s.Tree,{value:j.toJSON()})})]})})]})}):(0,f.jsx)(l.Modal,{children:(0,f.jsx)(l.ModalContent,{size:"lg",children:(0,f.jsx)(l.ModalHeader,{children:(0,f.jsx)(l.ModalTitle,{children:x('No product found',{_tags:'core'})})})})})}}),3935,[1,17,1172,1400,2387,3399,1099,2389,3936,2085,3391,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditProductForm=void 0;var t=P(_r(d[1])),a=e(_r(d[2])),r=_r(d[3]),o=_r(d[4]),s=_r(d[5]),n=P(_r(d[6])),c=_r(d[7]),l=_r(d[8]),i=_r(d[9]),u=_r(d[10]),_=_r(d[11]),j=_r(d[12]),p=_r(d[13]),x=_r(d[14]),f=_r(d[15]),b=_r(d[16]),F=_r(d[17]),h=_r(d[18]),y=e(_r(d[19])),k=_r(d[20]),S=_r(d[21]);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var n=o?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}const v=n.object({name:n.string(),regular_price:n.string(),sale_price:n.string(),stock_quantity:n.number().optional().nullable(),manage_stock:n.boolean().optional(),status:n.string(),featured:n.boolean(),sku:n.string().optional(),barcode:n.string().optional(),tax_status:n.string(),tax_class:n.string(),meta_data:x.metaDataSchema});_e.EditProductForm=({product:e})=>{const n=(0,y.default)(),O=(0,_.useT)(),[P,w]=t.useState(!1),{localPatch:C}=(0,k.useLocalMutation)();if(!e)throw new Error(O('Product not found',{_tags:'core'}));const M=(0,o.useForm)({resolver:(0,r.zodResolver)(v),defaultValues:{name:e.name,status:e.status,featured:e.featured,sku:e.sku,regular_price:e.regular_price,sale_price:e.sale_price,stock_quantity:e.stock_quantity,manage_stock:e.manage_stock,barcode:e.barcode,tax_status:e.tax_status,tax_class:''===e.tax_class?'standard':e.tax_class,meta_data:e.meta_data}}),I=t.useCallback((async t=>{'standard'===t.tax_class&&(t.tax_class=''),w(!0);try{await C({document:e,data:t}),await n(e).then((t=>{(0,s.isRxDocument)(t)&&i.Toast.show({type:'success',text1:O('{name} saved',{_tags:'core',name:e.name})})}))}catch(e){i.Toast.show({type:'error',text1:O('{message}',{_tags:'core',message:e.message||'Error'})})}finally{w(!1)}}),[C,e,n,O]);return(0,S.jsx)(c.Form,Object.assign({},M,{children:(0,S.jsxs)(u.VStack,{className:"gap-4",children:[(0,S.jsx)(p.FormErrors,{}),(0,S.jsxs)(a.default,{className:"grid grid-cols-2 gap-4",children:[(0,S.jsx)(a.default,{className:"col-span-2",children:(0,S.jsx)(c.FormField,{control:M.control,name:"name",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({label:O('Name',{_tags:'core'})},e))})}),(0,S.jsx)(c.FormField,{control:M.control,name:"sku",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({label:O('SKU',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"barcode",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({label:O('Barcode',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"regular_price",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:j.CurrencyInput,label:O('Regular Price',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"sale_price",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:j.CurrencyInput,label:O('Sale Price',{_tags:'core'})},e))}),(0,S.jsxs)(u.VStack,{children:[(0,S.jsx)(c.FormField,{control:M.control,name:"status",render:({field:e})=>(0,S.jsx)(c.FormSelect,Object.assign({label:O('Status',{_tags:'core'}),customComponent:b.ProductStatusSelect},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"featured",render:({field:e})=>(0,S.jsx)(c.FormSwitch,Object.assign({label:O('Featured',{_tags:'core'})},e))})]}),(0,S.jsxs)(u.VStack,{children:[(0,S.jsx)(c.FormField,{control:M.control,name:"stock_quantity",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:f.NumberInput,type:"numeric",label:O('Stock Quantity',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"manage_stock",render:({field:e})=>(0,S.jsx)(c.FormSwitch,Object.assign({label:O('Manage Stock',{_tags:'core'})},e))})]}),(0,S.jsx)(c.FormField,{control:M.control,name:"tax_class",render:({field:e})=>(0,S.jsx)(c.FormSelect,Object.assign({label:O('Tax Class',{_tags:'core'}),customComponent:F.TaxClassSelect},e))}),(0,S.jsx)(c.FormField,{control:M.control,name:"tax_status",render:({field:e})=>(0,S.jsx)(c.FormRadioGroup,Object.assign({label:O('Tax Status',{_tags:'core'}),customComponent:h.TaxStatusRadioGroup},e))}),(0,S.jsx)(a.default,{className:"col-span-2",children:(0,S.jsx)(x.MetaDataForm,{})})]}),(0,S.jsxs)(l.ModalFooter,{className:"px-0",children:[(0,S.jsx)(l.ModalClose,{children:O('Cancel',{_tags:'core'})}),(0,S.jsx)(l.ModalAction,{loading:P,onPress:M.handleSubmit(I),children:O('Save')})]})]})}))}}),3936,[1,17,320,3270,3272,1400,3273,3274,2387,1141,1132,2085,3453,3397,3404,3454,3937,3458,3459,3405,3398,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.ProductStatusSelect=void 0;var t=e(_r(d[1])),l=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var l=o(t);if(l&&l.has(e))return l.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var u=r?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=e[n]}return a.default=e,l&&l.set(e,a),a})(_r(d[2])),a=_r(d[3]),r=_r(d[4]),n=_r(d[5]),u=_r(d[6]);const c=["onValueChange","value"];function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(o=function(e){return e?l:t})(e)}_e.ProductStatusSelect=l.forwardRef(((e,o)=>{let{value:i}=e,s=(0,t.default)(e,c);const[f,v]=l.useState(0),p=(0,n.useT)(),b=l.useMemo((()=>[{label:p('Draft',{_tags:'core'}),value:'draft'},{label:p('Pending',{_tags:'core'}),value:'pending'},{label:p('Private',{_tags:'core'}),value:'private'},{label:p('Publish',{_tags:'core'}),value:'publish'}]),[p]),j=b.find((e=>e.value===i?.value))?.label;return(0,u.jsxs)(a.Select,Object.assign({ref:o,value:Object.assign({},i,{label:j})},s,{children:[(0,u.jsx)(a.SelectTrigger,{onLayout:e=>{v(e.nativeEvent.layout.width)},children:(0,u.jsx)(a.SelectValue,{placeholder:p('Select Status',{_tags:'core'})})}),(0,u.jsx)(a.SelectContent,{style:{width:f},children:(0,u.jsx)(a.SelectGroup,{children:b.map((e=>(0,u.jsx)(a.SelectItem,{label:e.label,value:e.value,children:(0,u.jsx)(r.Text,{children:e.label})},e.value)))})})]}))}))}),3937,[1,31,17,3301,1099,2085,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditVariation=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(r);if(n&&n.has(e))return n.get(e);var t={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(t,l,o):t[l]=e[l]}return t.default=e,n&&n.set(e,t),t})(_r(d[1])),n=_r(d[2]),t=_r(d[3]),a=_r(d[4]),l=_r(d[5]),o=_r(d[6]),s=_r(d[7]),i=_r(d[8]),c=_r(d[9]),u=e(_r(d[10])),f=_r(d[11]);function j(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:r})(e)}_e.EditVariation=({resource:e})=>{const j=(0,n.useObservableSuspense)(e),x=(0,c.useT)(),[h,v]=r.useState('form');return(0,u.default)(),(0,t.isRxDocument)(j)?(0,f.jsx)(a.Modal,{children:(0,f.jsxs)(a.ModalContent,{size:"lg",children:[(0,f.jsx)(a.ModalHeader,{children:(0,f.jsx)(a.ModalTitle,{children:(0,f.jsx)(o.Text,{children:x('Edit {name}',{name:j.name,_tags:'core'})})})}),(0,f.jsx)(a.ModalBody,{children:(0,f.jsxs)(l.Tabs,{value:h,onValueChange:v,children:[(0,f.jsxs)(l.TabsList,{className:"flex-row w-full",children:[(0,f.jsx)(l.TabsTrigger,{value:"form",className:"flex-1",children:(0,f.jsx)(o.Text,{children:x('Form',{_tags:'core'})})}),(0,f.jsx)(l.TabsTrigger,{value:"json",className:"flex-1",children:(0,f.jsx)(o.Text,{children:x('JSON',{_tags:'core'})})})]}),(0,f.jsx)(l.TabsContent,{value:"form",children:(0,f.jsx)(i.EditVariationForm,{variation:j})}),(0,f.jsx)(l.TabsContent,{value:"json",children:(0,f.jsx)(s.Tree,{value:j.toJSON()})})]})})]})}):(0,f.jsx)(a.Modal,{children:(0,f.jsx)(a.ModalContent,{size:"lg",children:(0,f.jsx)(a.ModalHeader,{children:(0,f.jsx)(a.ModalTitle,{children:(0,f.jsx)(o.Text,{children:x('No variation found',{_tags:'core'})})})})})})}}),3938,[1,17,1172,1400,2387,3399,1099,2389,3939,2085,3391,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditVariationForm=void 0;var t=v(_r(d[1])),a=e(_r(d[2])),r=_r(d[3]),o=_r(d[4]),s=_r(d[5]),n=v(_r(d[6])),c=_r(d[7]),l=_r(d[8]),i=_r(d[9]),u=_r(d[10]),_=_r(d[11]),p=_r(d[12]),x=_r(d[13]),j=_r(d[14]),f=_r(d[15]),b=_r(d[16]),F=_r(d[17]),y=_r(d[18]),k=e(_r(d[19])),h=_r(d[20]),S=_r(d[21]);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var n=o?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}const C=n.object({regular_price:n.string(),sale_price:n.string(),stock_quantity:n.number().optional().nullable(),manage_stock:n.boolean().optional(),status:n.string(),sku:n.string().optional(),barcode:n.string().optional(),tax_status:n.string(),tax_class:n.string(),meta_data:j.metaDataSchema});_e.EditVariationForm=({variation:e})=>{const n=(0,k.default)(),O=(0,_.useT)(),[v,w]=t.useState(!1),{localPatch:M}=(0,h.useLocalMutation)();if(!e)throw new Error(O('Variation not found',{_tags:'core'}));const P=(0,o.useForm)({resolver:(0,r.zodResolver)(C),defaultValues:{status:e.status,sku:e.sku,regular_price:e.regular_price,sale_price:e.sale_price,stock_quantity:e.stock_quantity,manage_stock:e.manage_stock,barcode:e.barcode,tax_status:e.tax_status,tax_class:''===e.tax_class?'standard':e.tax_class,meta_data:e.meta_data}}),I=t.useCallback((async t=>{'standard'===t.tax_class&&(t.tax_class=''),w(!0);try{await M({document:e,data:t}),await n(e).then((t=>{(0,s.isRxDocument)(t)&&i.Toast.show({type:'success',text1:O('{name} saved',{_tags:'core',name:e.name})})}))}catch(e){i.Toast.show({type:'error',text1:O('{message}',{_tags:'core',message:e.message||'Error'})})}finally{w(!1)}}),[M,e,n,O]);return(0,S.jsx)(c.Form,Object.assign({},P,{children:(0,S.jsxs)(u.VStack,{className:"gap-4",children:[(0,S.jsx)(x.FormErrors,{}),(0,S.jsxs)(a.default,{className:"grid grid-cols-2 gap-4",children:[(0,S.jsx)(c.FormField,{control:P.control,name:"sku",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({label:O('SKU',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"barcode",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({label:O('Barcode',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"regular_price",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:p.CurrencyInput,label:O('Regular Price',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"sale_price",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:p.CurrencyInput,label:O('Sale Price',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"status",render:({field:e})=>(0,S.jsx)(c.FormSelect,Object.assign({label:O('Status',{_tags:'core'}),customComponent:b.ProductStatusSelect},e))}),(0,S.jsxs)(u.VStack,{children:[(0,S.jsx)(c.FormField,{control:P.control,name:"stock_quantity",render:({field:e})=>(0,S.jsx)(c.FormInput,Object.assign({customComponent:f.NumberInput,type:"numeric",label:O('Stock Quantity',{_tags:'core'})},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"manage_stock",render:({field:e})=>(0,S.jsx)(c.FormSwitch,Object.assign({label:O('Manage Stock',{_tags:'core'})},e))})]}),(0,S.jsx)(c.FormField,{control:P.control,name:"tax_class",render:({field:e})=>(0,S.jsx)(c.FormSelect,Object.assign({label:O('Tax Class',{_tags:'core'}),customComponent:F.TaxClassSelect},e))}),(0,S.jsx)(c.FormField,{control:P.control,name:"tax_status",render:({field:e})=>(0,S.jsx)(c.FormRadioGroup,Object.assign({label:O('Tax Status',{_tags:'core'}),customComponent:y.TaxStatusRadioGroup},e))}),(0,S.jsx)(a.default,{className:"col-span-2",children:(0,S.jsx)(j.MetaDataForm,{})})]}),(0,S.jsxs)(l.ModalFooter,{className:"px-0",children:[(0,S.jsx)(l.ModalClose,{children:O('Cancel',{_tags:'core'})}),(0,S.jsx)(l.ModalAction,{loading:v,onPress:P.handleSubmit(I),children:O('Save')})]})]})}))}}),3939,[1,17,320,3270,3272,1400,3273,3274,2387,1141,1132,2085,3453,3397,3404,3454,3937,3458,3459,3405,3398,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=W(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=o?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r})(_r(d[1])),a=e(_r(d[2])),r=_r(d[3]),o=_r(d[4]),i=_r(d[5]),c=_r(d[6]),n=_r(d[7]),s=_r(d[8]),u=_r(d[9]),l=_r(d[10]),p=_r(d[11]),f=_r(d[12]),y=_r(d[13]),P=_r(d[14]),x=_r(d[15]),_=_r(d[16]),b=_r(d[17]),j=_r(d[18]),h=_r(d[19]),S=_r(d[20]),v=_r(d[21]),k=_r(d[22]),D=_r(d[23]),N=_r(d[24]),T=_r(d[25]),w=e(_r(d[26])),C=_r(d[27]),M=_r(d[28]),B=_r(d[29]),I=_r(d[30]),O=_r(d[31]),V=_r(d[32]),q=_r(d[33]),E=_r(d[34]),Q=_r(d[35]),R=_r(d[36]),F=_r(d[37]),A=_r(d[38]),U=_r(d[39]);function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(W=function(e){return e?a:t})(e)}const H={simple:{actions:p.Actions,image:C.ProductImage,name:P.ProductName,barcode:f.Barcode,price:x.Price,regular_price:y.EditablePrice,sale_price:y.EditablePrice,date_created:N.Date,date_modified:N.Date,stock_quantity:_.StockQuantity,stock_status:b.StockStatus,categories:T.ProductCategories,tags:M.ProductTags},variable:{actions:p.Actions,image:I.VariableProductImage,name:P.ProductName,barcode:f.Barcode,regular_price:O.VariableProductPrice,price:O.VariableProductPrice,sale_price:O.VariableProductPrice,date_created:N.Date,date_modified:N.Date,stock_quantity:_.StockQuantity,stock_status:b.StockStatus,categories:T.ProductCategories,tags:M.ProductTags}},K={actions:j.VariationActions,price:x.Price,name:h.ProductVariationName,sale_price:y.EditablePrice,regular_price:y.EditablePrice,stock_quantity:_.StockQuantity,date_created:N.Date,date_modified:N.Date,barcode:f.Barcode,stock_status:b.StockStatus,image:q.ProductVariationImage,categories:()=>{},tags:()=>{}},z=({column:e,row:t})=>{let r='simple';return'variable'===t.original.document.type&&(r='variable'),(0,a.default)(H,[r,e.id])},L=({column:e,row:t})=>(0,a.default)(K,e.id),G=({item:e,index:t})=>'variable'===e.original.document.type?(0,U.jsx)(V.VariableProductRow,{row:e,index:t}):(0,U.jsx)(i.DataTableRow,{row:e,index:t}),J=()=>(0,U.jsx)(D.DataTableFooter,{children:(0,U.jsx)(B.TaxBasedOn,{})});_e.default=()=>{const{uiSettings:e}=(0,F.useUISettings)('products'),{calcTaxes:a}=(0,R.useTaxRates)(),i=(0,k.useT)(),{patch:p}=(0,A.useMutation)({collectionName:'products'}),{patch:f}=(0,A.useMutation)({collectionName:'variations'}),y=t.useRef(null),{parentQuery:P}=(0,l.useRelationalQuery)({queryKeys:['products',{target:'page',type:'relational'}],collectionName:'products',initialParams:{sort:[{[e.sortBy]:e.sortDirection}]},infiniteScroll:!0},{queryKeys:['variations',{target:'page',type:'relational'}],collectionName:'variations',initialParams:{sort:[{id:'asc'}]},endpoint:'products/variations',greedy:!0});(0,v.useBarcode)(P,y);const x=t.useMemo((()=>({taxLocation:'base'})),[]),_=t.useMemo((()=>({onChange:({document:e,changes:t})=>{'variation'===e.type?f({document:e,data:t}):p({document:e,data:t})},variationRenderCell:L})),[p,f]);return(0,U.jsx)(r.Box,{className:"p-2 h-full",children:(0,U.jsxs)(o.Card,{className:"flex-1",children:[(0,U.jsx)(o.CardHeader,{className:"p-2 bg-input",children:(0,U.jsxs)(u.VStack,{children:[(0,U.jsxs)(n.HStack,{children:[(0,U.jsx)(c.ErrorBoundary,{children:(0,U.jsx)(E.QuerySearchInput,{ref:y,query:P,placeholder:i('Search Products',{_tags:'core'}),className:"flex-1"})}),(0,U.jsx)(Q.UISettingsDialog,{title:i('Product Settings',{_tags:'core'}),children:(0,U.jsx)(S.UISettingsForm,{})})]}),(0,U.jsx)(c.ErrorBoundary,{children:(0,U.jsx)(w.default,{query:P})})]})}),(0,U.jsx)(o.CardContent,{className:"flex-1 p-0",children:(0,U.jsx)(c.ErrorBoundary,{children:(0,U.jsx)(s.Suspense,{children:(0,U.jsx)(D.DataTable,{id:"products",query:P,renderCell:z,renderItem:G,noDataMessage:i('No products found',{_tags:'core'}),estimatedItemSize:100,extraContext:x,TableFooterComponent:a?J:D.DataTableFooter,getItemType:e=>e.original.document.type,tableMeta:_})})})})]})})}}),3940,[1,17,898,2294,2388,3371,888,891,2157,1132,2243,3941,3942,3943,3944,3945,3946,3947,3948,3949,3950,3951,2085,3367,3584,3487,3495,3510,3489,3511,3517,3518,3519,3525,3425,3323,3470,2381,3420,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.Actions=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),o=_r(d[4]),i=_r(d[5]),l=_r(d[6]),a=_r(d[7]),s=_r(d[8]),c=e(_r(d[9])),u=e(_r(d[10])),p=_r(d[11]);function j(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(j=function(e){return e?t:r})(e)}_e.Actions=({row:e})=>{const j=e.original.document,[f,h]=r.useState(!1),x=(0,t.useNavigation)(),D=(0,u.default)(),w=(0,s.useT)(),v=(0,c.default)(),_=r.useCallback((async()=>{try{j.id&&await v(j.id,j.collection),await j.remove()}finally{}}),[j,v]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(o.DropdownMenu,{children:[(0,p.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,p.jsx)(l.IconButton,{name:"ellipsisVertical"})}),(0,p.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,p.jsxs)(o.DropdownMenuItem,{onPress:()=>x.navigate('EditProduct',{productID:j.uuid}),children:[(0,p.jsx)(i.Icon,{name:"penToSquare"}),(0,p.jsx)(a.Text,{children:w('Edit',{_tags:'core'})})]}),j.id&&(0,p.jsxs)(o.DropdownMenuItem,{onPress:()=>{j.id&&D(j.id,j.collection)},children:[(0,p.jsx)(i.Icon,{name:"arrowRotateRight"}),(0,p.jsx)(a.Text,{children:w('Sync',{_tags:'core'})})]}),(0,p.jsx)(o.DropdownMenuSeparator,{}),(0,p.jsxs)(o.DropdownMenuItem,{variant:"destructive",onPress:()=>h(!0),children:[(0,p.jsx)(i.Icon,{name:"trash",className:"fill-destructive web:group-focus:fill-accent-foreground"}),(0,p.jsx)(a.Text,{children:w('Delete',{_tags:'core'})})]})]})]}),(0,p.jsx)(n.AlertDialog,{open:f,onOpenChange:h,children:(0,p.jsxs)(n.AlertDialogContent,{children:[(0,p.jsxs)(n.AlertDialogHeader,{children:[(0,p.jsx)(n.AlertDialogTitle,{children:w('Delete {product}',{_tags:'core',product:j.name})}),(0,p.jsx)(n.AlertDialogDescription,{children:w('Are you sure you want to delete this product? Deleted products will be placed in the Trash on the server.')})]}),(0,p.jsxs)(n.AlertDialogFooter,{children:[(0,p.jsx)(n.AlertDialogCancel,{children:w('Cancel',{_tags:'core'})}),(0,p.jsx)(n.AlertDialogAction,{variant:"destructive",onPress:_,children:w('Delete',{_tags:'core'})})]})]})})]})}}),3941,[1,17,487,3573,2323,897,1105,1099,2085,3406,3424,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Barcode=void 0;var e=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var c=a?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(r,u,c):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r})(_r(d[0])),t=_r(d[1]),n=_r(d[2]),r=_r(d[3]);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}_e.Barcode=({row:o,table:a})=>{const u=o.original.document,c=(0,t.useObservableEagerState)(u.barcode$),[i,l]=e.useState(c);e.useEffect((()=>{l(c)}),[c]);const f=e.useCallback((()=>{a.options.meta.onChange({document:u,changes:{barcode:i}})}),[u,a.options.meta,i]);return(0,r.jsx)(n.Input,{value:i,onChangeText:l,onBlur:f,onSubmitEditing:f,blurOnSubmit:!0})}}),3942,[17,1172,3300,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditablePrice=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e,r&&r.set(e,o)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}_e.EditablePrice=({row:n,column:o,table:a})=>{const i=n.original.document,u=(0,e.useObservableEagerState)(i[`${o.id}$`]);return(0,r.jsx)(t.CurrencyInput,{value:u,onChangeText:e=>a.options.meta.onChange({document:i,changes:{[o.id]:String(e)}}),disabled:'sale_price'===o.id&&!i.on_sale})}}),3943,[17,1172,3453,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.ProductName=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a)})(_r(d[1]));var t=_r(d[2]),r=_r(d[3]),a=_r(d[4]),n=_r(d[5]),s=_r(d[6]),o=e(_r(d[7])),u=_r(d[8]);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}_e.ProductName=e=>{const c=e.row.original.document,l=e.column.columnDef.meta.show,i=(0,t.useObservableEagerState)(c.name$);return(0,u.jsxs)(a.VStack,{space:"xs",className:"w-full",children:[(0,u.jsx)(n.EditableName,{value:i,onChangeText:t=>e.table.options.meta.onChange({document:c,changes:{name:t}})}),l('sku')&&(0,u.jsx)(r.Text,{className:"text-sm",children:c.sku}),l('barcode')&&(0,u.jsx)(r.Text,{className:"text-sm",children:c.barcode}),l('attributes')&&(0,u.jsx)(s.PlainAttributes,Object.assign({},e)),'variable'===c.type&&(0,u.jsx)(s.ProductAttributes,Object.assign({},e)),'grouped'===c.type&&(0,u.jsx)(o.default,Object.assign({},e))]})}}),3944,[1,17,1172,1099,1132,3483,3485,3488,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Price=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(a,u,i):a[u]=e[u]}a.default=e,r&&r.set(e,a)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]),a=_r(d[4]);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}_e.Price=({row:n,column:o})=>{const u=n.original.document,i=(0,e.useObservableEagerState)(u.price$),c=(0,e.useObservableEagerState)(u.tax_status$),l=(0,e.useObservableEagerState)(u.tax_class$),s=(0,t.useDataTable)();return(0,a.jsx)(r.PriceWithTax,{price:i,taxStatus:c,taxClass:l,taxDisplay:o.columnDef.meta.show('tax')?'text':'tooltip',taxLocation:s?.taxLocation})}}),3945,[17,1172,3371,3490,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.StockQuantity=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(a,o,c):a[o]=e[o]}a.default=e,n&&n.set(e,a)})(_r(d[1]));var t=e(_r(d[2])),n=_r(d[3]),a=_r(d[4]),r=_r(d[5]),o=_r(d[6]),c=_r(d[7]),u=_r(d[8]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}_e.StockQuantity=({row:e,table:i})=>{const s=e.original.document,l=(0,n.useObservableEagerState)(s.stock_quantity$),f=(0,n.useObservableEagerState)(s.manage_stock$),p=(0,o.useT)();return(0,u.jsxs)(r.VStack,{children:[(0,u.jsx)(t.default,{className:"flex-row justify-center",children:(0,u.jsx)(c.NumberInput,{value:String(l||0),onChangeText:e=>i.options.meta.onChange({document:s,changes:{stock_quantity:e}}),disabled:!f})}),(0,u.jsx)(a.SwitchWithLabel,{nativeID:"manage_stock",label:p('Manage',{_tags:'core'}),checked:f,onCheckedChange:e=>i.options.meta.onChange({document:s,changes:{manage_stock:e}}),size:"sm"})]})}}),3946,[1,17,320,1172,3315,1132,2085,3454,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.StockStatus=void 0;var e=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n})(_r(d[0])),t=_r(d[1]),r=_r(d[2]),n=_r(d[3]),o=_r(d[4]),s=_r(d[5]);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}_e.StockStatus=({row:u})=>{const a=u.original.document,c=(0,t.useObservableEagerState)(a.stock_status$),{getLabel:i}=(0,o.useStockStatusLabel)(),{query:l}=(0,n.useDataTable)(),f=e.useMemo((()=>{switch(c){case'instock':return'ghost-success';case'outofstock':return'ghost-destructive';case'onbackorder':case'lowstock':return'ghost-warning';default:return'ghost'}}),[c]);return(0,s.jsx)(r.ButtonPill,{size:"xs",variant:f,onPress:()=>l.where('stock_status').equals(c).exec(),children:i(c)})}}),3947,[17,1172,1169,3371,3504,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.VariationActions=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(r);if(n&&n.has(e))return n.get(e);var t={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(t,i,a):t[i]=e[i]}return t.default=e,n&&n.set(e,t),t})(_r(d[1])),n=_r(d[2]),t=_r(d[3]),o=_r(d[4]),i=_r(d[5]),a=_r(d[6]),s=_r(d[7]),l=e(_r(d[8])),c=e(_r(d[9])),u=_r(d[10]);function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:r})(e)}_e.VariationActions=({row:e})=>{const p=e.original.document,f=e.getParentRow().document,[j,h]=r.useState(!1),x=(0,n.useNavigation)(),D=(0,c.default)(),v=(0,s.useT)(),w=(0,l.default)(),_=r.useCallback((async()=>{try{p.id&&await w(p.id,p.collection),await p.remove()}finally{}}),[p,w]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.DropdownMenu,{children:[(0,u.jsx)(o.DropdownMenuTrigger,{children:(0,u.jsx)(i.Icon,{name:"ellipsisVertical"})}),(0,u.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,u.jsxs)(o.DropdownMenuItem,{onPress:()=>x.navigate('EditVariation',{parentID:f.id,variationID:p.uuid}),children:[(0,u.jsx)(i.Icon,{name:"penToSquare"}),(0,u.jsx)(a.Text,{children:v('Edit',{_tags:'core'})})]}),p.id&&(0,u.jsxs)(o.DropdownMenuItem,{onPress:()=>{D(p.id,p.collection,`products/${f.id}/variations`)},children:[(0,u.jsx)(i.Icon,{name:"arrowRotateRight"}),(0,u.jsx)(a.Text,{children:v('Sync',{_tags:'core'})})]}),(0,u.jsx)(o.DropdownMenuSeparator,{}),(0,u.jsxs)(o.DropdownMenuItem,{variant:"destructive",onPress:()=>h(!0),children:[(0,u.jsx)(i.Icon,{name:"trash",className:"fill-destructive web:group-focus:fill-accent-foreground"}),(0,u.jsx)(a.Text,{children:v('Delete',{_tags:'core'})})]})]})]}),(0,u.jsx)(t.AlertDialog,{open:j,onOpenChange:h,children:(0,u.jsxs)(t.AlertDialogContent,{children:[(0,u.jsxs)(t.AlertDialogHeader,{children:[(0,u.jsx)(t.AlertDialogTitle,{children:v('Delete {product}',{_tags:'core',product:`${f.name} - ${p.name}`})}),(0,u.jsx)(t.AlertDialogDescription,{children:v('Are you sure you want to delete this variation? Deleting a variation is permanent, there is no Trash for variations.')})]}),(0,u.jsxs)(t.AlertDialogFooter,{children:[(0,u.jsx)(t.AlertDialogCancel,{children:v('Cancel',{_tags:'core'})}),(0,u.jsx)(t.AlertDialogAction,{variant:"destructive",onPress:_,children:v('Delete',{_tags:'core'})})]})]})})]})}}),3948,[1,17,487,3573,2323,897,1099,2085,3406,3424,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.ProductVariationName=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&{}.hasOwnProperty.call(e,c)){var u=a?Object.getOwnPropertyDescriptor(e,c):null;u&&(u.get||u.set)?Object.defineProperty(o,c,u):o[c]=e[c]}o.default=e,r&&r.set(e,o)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}_e.ProductVariationName=({row:n,column:o})=>{const a=n.original.document,{show:c}=o.columnDef.meta;return(0,r.jsxs)(t.VStack,{space:"xs",children:[(0,r.jsx)(e.Text,{className:"font-bold",children:a.name}),c('sku')&&(0,r.jsx)(e.Text,{className:"text-sm",children:a.sku}),c('barcode')&&(0,r.jsx)(e.Text,{className:"text-sm",children:a.barcode})]})}}),3949,[17,1099,1132,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.schema=_e.UISettingsForm=void 0;var e=f(_r(d[0])),t=_r(d[1]),r=_r(d[2]),n=_r(d[3]),s=f(_r(d[4])),o=_r(d[5]),a=_r(d[6]),u=_r(d[7]),c=_r(d[8]),l=_r(d[9]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}const p=_e.schema=s.object(Object.assign({},u.columnsFormSchema.shape));_e.UISettingsForm=()=>{const{uiSettings:s,getUILabel:i,patchUI:f,resetUI:b}=(0,c.useUISettings)('products'),j=(0,r.useObservableState)(s.$,s.get()),{buttonPressHandlerRef:O}=(0,u.useDialogContext)();O.current=b;const h=(0,n.useForm)({resolver:(0,t.zodResolver)(p),defaultValues:Object.assign({},j)});return e.useEffect((()=>{h.reset(Object.assign({},j))}),[j,h]),(0,o.useFormChangeHandler)({form:h,onChange:f}),(0,l.jsx)(o.Form,Object.assign({},h,{children:(0,l.jsx)(a.VStack,{children:(0,l.jsx)(u.UISettingsColumnsForm,{columns:j.columns,getUILabel:i})})}))}}),3950,[17,3270,1172,3272,3273,3274,1132,3323,2381,483]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.useBarcode=void 0;var o=r(d[0]),c=r(d[1]),t=r(d[2]),s=r(d[3]);e.useBarcode=(n,u)=>{const{barcode$:l,onKeyPress:h}=(0,s.useBarcodeDetection)(),{barcodeSearch:y}=(0,s.useBarcodeSearch)(),_=(0,t.useT)();return(0,o.useSubscription)(l,(async o=>{const t=_('Barcode scanned: {barcode}',{barcode:o,_tags:'core'}),s=await y(o);let l,h='info';1===s.length&&(l=_('1 product found locally',{_tags:'core'})),(0===s.length||s.length>1)&&(l=_('{count} products found locally',{count:s.length,_tags:'core'}),h='error'),c.Toast.show({text1:t,text2:l,type:h}),n.search(o),u.current?.setSearch(o)})),{onKeyPress:h}}}),3951,[1172,1141,2085,3492]);
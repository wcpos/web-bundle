__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(r);if(n&&n.has(e))return n.get(e);var t={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,n&&n.set(e,t),t})(_r(d[1])),n=_r(d[2]),t=e(_r(d[3])),o=_r(d[4]),s=_r(d[5]),a=_r(d[6]),u=_r(d[7]),c=e(_r(d[8])),i=_r(d[9]),l=_r(d[10]),f=_r(d[11]);function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:r})(e)}const j=(0,n.createStackNavigator)(),v=()=>(0,f.jsx)(s.ErrorBoundary,{children:(0,f.jsx)(a.Suspense,{children:(0,f.jsx)(c.default,{})})}),x=({navigation:e})=>(0,f.jsx)(s.ErrorBoundary,{children:(0,f.jsx)(u.AddCustomer,{})}),y=({route:e,navigation:n})=>{const u=(0,t.default)(e,['params','customerID']),{collection:c}=(0,l.useCollection)('customers'),p=c.findOneFix(u),j=r.useMemo((()=>new o.ObservableResource(p.$)),[p]);return(0,f.jsx)(s.ErrorBoundary,{children:(0,f.jsx)(a.Suspense,{children:(0,f.jsx)(i.EditCustomer,{resource:j})})})};_e.default=()=>(0,f.jsxs)(j.Navigator,{screenOptions:{headerShown:!1},children:[(0,f.jsx)(j.Screen,{name:"Customers",component:v}),(0,f.jsxs)(j.Group,{screenOptions:{presentation:'transparentModal'},children:[(0,f.jsx)(j.Screen,{name:"AddCustomer",component:x}),(0,f.jsx)(j.Screen,{name:"EditCustomer",component:y})]})]})}),3901,[1,17,2099,898,1172,888,2157,3915,3916,3922,3390,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.AddCustomer=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o})(_r(d[1])),r=_r(d[2]),o=_r(d[3]),a=_r(d[4]),s=_r(d[5]),n=_r(d[6]),u=_r(d[7]),c=_r(d[8]),l=_r(d[9]),i=_r(d[10]),f=e(_r(d[11])),p=_r(d[12]),y=_r(d[13]),h=e(_r(d[14])),j=_r(d[15]);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}_e.AddCustomer=()=>{const{create:e}=(0,y.useMutation)({collectionName:'customers'}),v=(0,i.useT)(),[_,x]=t.useState(!1),M=(0,o.useNavigation)(),{format:b}=(0,h.default)();(0,f.default)();const w=(0,a.useForm)({resolver:(0,r.zodResolver)(p.customerFormSchema),defaultValues:{}}),O=t.useCallback((async t=>{x(!0);try{const r=await e({data:t});(0,s.isRxDocument)(r)&&l.Toast.show({type:'success',text1:v('{name} saved',{_tags:'core',name:b(r)})})}catch(e){l.Toast.show({type:'error',text1:v('{message}',{_tags:'core',message:e.message||'Error'})})}finally{x(!1)}}),[e,b,v]);return(0,j.jsx)(u.Modal,{children:(0,j.jsxs)(u.ModalContent,{size:"lg",children:[(0,j.jsx)(u.ModalHeader,{children:(0,j.jsx)(u.ModalTitle,{children:(0,j.jsx)(c.Text,{children:v('Add Customer',{_tags:'core'})})})}),(0,j.jsx)(u.ModalBody,{children:(0,j.jsx)(n.ErrorBoundary,{children:(0,j.jsx)(p.CustomerForm,{form:w,onSubmit:O,onClose:()=>M.dispatch(o.StackActions.pop(1)),loading:_})})})]})})}}),3915,[1,17,3270,487,3272,1400,888,2387,1099,1141,2085,3391,3407,3420,3421,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}s.default=e,r&&r.set(e,s)})(_r(d[1]));var t=_r(d[2]),r=e(_r(d[3])),s=_r(d[4]),a=_r(d[5]),n=_r(d[6]),o=_r(d[7]),i=_r(d[8]),l=_r(d[9]),c=_r(d[10]),u=_r(d[11]),f=_r(d[12]),p=_r(d[13]),j=_r(d[14]),x=_r(d[15]),h=_r(d[16]),_=_r(d[17]),y=_r(d[18]),v=_r(d[19]),C=_r(d[20]),S=_r(d[21]),b=_r(d[22]),N=_r(d[23]),P=_r(d[24]);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}const O={avatar_url:x.Avatar,billing:j.Address,shipping:j.Address,actions:p.Actions,email:h.CustomerEmail,date_created_gmt:C.Date,date_modified_gmt:C.Date},T=e=>(0,r.default)(O,e.column.id);_e.default=()=>{const{uiSettings:e}=(0,N.useUISettings)('customers'),r=(0,y.useT)(),p=(0,t.useNavigation)(),j=(0,f.useQuery)({queryKeys:['customers'],collectionName:'customers',initialParams:{sort:[{[e.sortBy]:e.sortDirection}]},infiniteScroll:!0});return(0,P.jsx)(s.Box,{className:"h-full p-2",children:(0,P.jsxs)(a.Card,{className:"flex-1",children:[(0,P.jsx)(a.CardHeader,{className:"p-0 bg-input",children:(0,P.jsxs)(o.HStack,{className:"p-2",children:[(0,P.jsx)(S.QuerySearchInput,{query:j,placeholder:r('Search Customers',{_tags:'core'}),className:"flex-1"}),(0,P.jsxs)(u.Tooltip,{children:[(0,P.jsx)(u.TooltipTrigger,{asChild:!0,children:(0,P.jsx)(i.IconButton,{name:"userPlus",onPress:()=>p.navigate('AddCustomer')})}),(0,P.jsx)(u.TooltipContent,{children:(0,P.jsx)(c.Text,{children:r('Add new customer',{_tags:'core'})})})]}),(0,P.jsx)(b.UISettingsDialog,{title:r('Customer Settings',{_tags:'core'}),children:(0,P.jsx)(_.UISettingsForm,{})})]})}),(0,P.jsx)(a.CardContent,{className:"flex-1 p-0",children:(0,P.jsx)(n.ErrorBoundary,{children:(0,P.jsx)(l.Suspense,{children:(0,P.jsx)(v.DataTable,{id:"customers",query:j,renderCell:T,noDataMessage:r('No customers found',{_tags:'core'}),estimatedItemSize:100})})})})]})})}}),3916,[1,17,487,898,2294,2388,888,891,1105,2157,1099,1106,2243,3917,3918,3919,3920,3921,2085,3367,3584,3425,3323,2381,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.Actions=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),o=_r(d[4]),s=_r(d[5]),a=_r(d[6]),i=_r(d[7]),l=_r(d[8]),c=_r(d[9]),u=_r(d[10]),f=_r(d[11]),h=_r(d[12]),j=e(_r(d[13])),x=e(_r(d[14])),p=e(_r(d[15])),D=_r(d[16]);function v(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(v=function(e){return e?t:r})(e)}_e.Actions=({row:e})=>{const v=e.original.document,w=(0,t.useNavigation)(),_=(0,x.default)(),[y,b]=r.useState(!1),A=(0,h.useT)(),{format:C}=(0,p.default)(),[M,P]=r.useState(!v.id),k=(0,j.default)(),I=r.useCallback((async()=>{try{v.id&&await k(v.id,v.collection,{force:M}),await v.getLatest().remove()}finally{}}),[v,k,M]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(s.DropdownMenu,{children:[(0,D.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,D.jsx)(l.IconButton,{name:"ellipsisVertical"})}),(0,D.jsxs)(s.DropdownMenuContent,{align:"end",children:[(0,D.jsxs)(s.DropdownMenuItem,{onPress:()=>w.navigate('EditCustomer',{customerID:v.uuid}),children:[(0,D.jsx)(i.Icon,{name:"penToSquare"}),(0,D.jsx)(u.Text,{children:A('Edit',{_tags:'core'})})]}),v.id&&(0,D.jsxs)(s.DropdownMenuItem,{onPress:()=>{v.id&&_(v.id,v.collection)},children:[(0,D.jsx)(i.Icon,{name:"arrowRotateRight"}),(0,D.jsx)(u.Text,{children:A('Sync',{_tags:'core'})})]}),(0,D.jsx)(s.DropdownMenuSeparator,{}),(0,D.jsxs)(s.DropdownMenuItem,{variant:"destructive",onPress:()=>b(!0),children:[(0,D.jsx)(i.Icon,{name:"trash",className:"fill-destructive web:group-focus:fill-accent-foreground"}),(0,D.jsx)(u.Text,{children:A('Delete',{_tags:'core'})})]})]})]}),(0,D.jsx)(n.AlertDialog,{open:y,onOpenChange:b,children:(0,D.jsxs)(n.AlertDialogContent,{children:[(0,D.jsxs)(n.AlertDialogHeader,{children:[(0,D.jsx)(n.AlertDialogTitle,{children:A('Delete {name}',{_tags:'core',name:C(v)})}),(0,D.jsx)(n.AlertDialogDescription,{children:(0,D.jsxs)(f.VStack,{children:[(0,D.jsx)(u.Text,{className:"text-destructive",children:A('Are you sure you want to delete this user? Deleting a user is permanent, there is no Trash for WordPress users.',{_tags:'core'})}),(0,D.jsxs)(a.HStack,{children:[(0,D.jsx)(o.Checkbox,{"aria-labelledby":"confirm",onCheckedChange:P,checked:M}),(0,D.jsx)(c.Label,{nativeID:"confirm",onPress:()=>{P(!M)},children:A('Confirm',{_tags:'core'})})]})]})})]}),(0,D.jsxs)(n.AlertDialogFooter,{children:[(0,D.jsx)(n.AlertDialogCancel,{children:A('Cancel',{_tags:'core'})}),(0,D.jsx)(n.AlertDialogAction,{variant:"destructive",disabled:!M,onPress:I,children:A('Delete',{_tags:'core'})})]})]})})]})}}),3917,[1,17,487,3573,3282,2323,891,897,1105,3278,1099,1132,2085,3406,3424,3421,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Address=void 0;!(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n(r);if(t&&t.has(e))return t.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var f=a?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=e[u]}o.default=e,t&&t.set(e,o)})(_r(d[0]));var e=_r(d[1]),r=_r(d[2]),t=_r(d[3]);function n(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:r})(e)}_e.Address=({row:n,column:o})=>{const a=n.original.document,u=(0,e.useObservableEagerState)(a[`${o.id}$`]);return(0,t.jsx)(r.FormatAddress,{address:u,showName:!0})}}),3918,[17,1172,3577,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Avatar=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var c=u?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}n.default=e,r&&r.set(e,n)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]),n=_r(d[4]);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}_e.Avatar=({row:a})=>{const u=a.original.document,o=(0,e.useObservableEagerState)(u.avatar_url$),c=(0,r.useImageAttachment)(u,o);return(0,n.jsx)(t.Image,{source:c,className:"w-10 h-10 rounded",recyclingKey:u.uuid})}}),3919,[17,1172,2295,2371,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.CustomerEmail=void 0;!(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}o.default=e,r&&r.set(e,o)})(_r(d[0]));var e=_r(d[1]),t=_r(d[2]),r=_r(d[3]);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}_e.CustomerEmail=({row:n})=>{const o=n.original.document,u=(0,e.useObservableEagerState)(o.email$);return(0,r.jsx)(t.Text,{numberOfLines:1,children:u})}}),3920,[17,1172,1099,483]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.schema=_e.UISettingsForm=void 0;var e=f(_r(d[0])),t=_r(d[1]),r=_r(d[2]),n=_r(d[3]),s=f(_r(d[4])),o=_r(d[5]),a=_r(d[6]),u=_r(d[7]),c=_r(d[8]),l=_r(d[9]);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}const p=_e.schema=s.object(Object.assign({},u.columnsFormSchema.shape));_e.UISettingsForm=()=>{const{uiSettings:s,getUILabel:i,resetUI:f,patchUI:b}=(0,c.useUISettings)('customers'),j=(0,r.useObservableState)(s.$,s.get()),{buttonPressHandlerRef:O}=(0,u.useDialogContext)();O.current=f;const h=(0,n.useForm)({resolver:(0,t.zodResolver)(p),defaultValues:Object.assign({},j)});return e.useEffect((()=>{h.reset(Object.assign({},j))}),[j,h]),(0,o.useFormChangeHandler)({form:h,onChange:b}),(0,l.jsx)(o.Form,Object.assign({},h,{children:(0,l.jsx)(a.VStack,{children:(0,l.jsx)(u.UISettingsColumnsForm,{columns:j.columns,getUILabel:i})})}))}}),3921,[17,3270,1172,3272,3273,3274,1132,3323,2381,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditCustomer=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var o=s?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),s=_r(d[4]),l=_r(d[5]),o=_r(d[6]),a=_r(d[7]),i=_r(d[8]),c=_r(d[9]),u=e(_r(d[10])),f=e(_r(d[11])),j=_r(d[12]);function x(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(x=function(e){return e?t:r})(e)}_e.EditCustomer=({resource:e})=>{const x=(0,t.useObservableSuspense)(e),h=(0,c.useT)(),[p,v]=r.useState('form'),{format:T}=(0,f.default)();return(0,u.default)(),(0,n.isRxDocument)(x)?(0,j.jsx)(s.Modal,{children:(0,j.jsxs)(s.ModalContent,{size:"lg",children:[(0,j.jsx)(s.ModalHeader,{children:(0,j.jsx)(s.ModalTitle,{children:(0,j.jsx)(o.Text,{children:h('Edit {name}',{name:T(x),_tags:'core'})})})}),(0,j.jsx)(s.ModalBody,{children:(0,j.jsxs)(l.Tabs,{value:p,onValueChange:v,children:[(0,j.jsxs)(l.TabsList,{className:"flex-row w-full",children:[(0,j.jsx)(l.TabsTrigger,{value:"form",className:"flex-1",children:(0,j.jsx)(o.Text,{children:h('Form',{_tags:'core'})})}),(0,j.jsx)(l.TabsTrigger,{value:"json",className:"flex-1",children:(0,j.jsx)(o.Text,{children:h('JSON',{_tags:'core'})})})]}),(0,j.jsx)(l.TabsContent,{value:"form",children:(0,j.jsx)(i.EditCustomerForm,{customer:x})}),(0,j.jsx)(l.TabsContent,{value:"json",children:(0,j.jsx)(a.Tree,{value:x.toJSON()})})]})})]})}):(0,j.jsx)(s.Modal,{children:(0,j.jsx)(s.ModalContent,{size:"lg",children:(0,j.jsx)(s.ModalHeader,{children:(0,j.jsx)(s.ModalTitle,{children:(0,j.jsx)(o.Text,{children:h('No customer found',{_tags:'core'})})})})})})}}),3922,[1,17,1172,1400,2387,3399,1099,2389,3923,2085,3391,3421,483]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.EditCustomerForm=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o})(_r(d[1])),r=_r(d[2]),o=_r(d[3]),a=_r(d[4]),n=_r(d[5]),s=_r(d[6]),u=_r(d[7]),c=_r(d[8]),i=e(_r(d[9])),l=_r(d[10]),f=e(_r(d[11])),p=_r(d[12]);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}_e.EditCustomerForm=({customer:e})=>{const y=(0,u.useT)(),[v,_]=t.useState(!1),{localPatch:O}=(0,l.useLocalMutation)(),b=(0,i.default)(),{format:h}=(0,f.default)(),w=(0,o.useNavigation)(),j=(0,a.useForm)({resolver:(0,r.zodResolver)(c.customerFormSchema),defaultValues:Object.assign({},e.toJSON())}),P=t.useCallback((async t=>{_(!0);try{await O({document:e,data:t}),await b(e).then((e=>{(0,n.isRxDocument)(e)&&s.Toast.show({type:'success',text1:y('{name} saved',{_tags:'core',name:h(e)})})}))}catch(e){s.Toast.show({type:'error',text1:y('{message}',{_tags:'core',message:e.message||'Error'})})}finally{_(!1)}}),[O,e,b,y,h]);return(0,p.jsx)(c.CustomerForm,{form:j,onClose:()=>w.dispatch(o.StackActions.pop(1)),onSubmit:P,loading:v})}}),3923,[1,17,3270,487,3272,1400,1141,2085,3407,3405,3398,3421,483]);